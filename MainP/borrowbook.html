<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SMU Library</title>
  <link rel="icon" type="image" href="Imgs/icon/saint-martin-university_track-field_saints_logo.png" />
  <!-- Link to external CSS -->
  <link rel="stylesheet" href="CSS/styles.css">
  <!-- New stylesheet for your books layout -->
   <link rel="stylesheet" href="CSS/bookwrapper.css">
  <link rel="stylesheet" href="CSS/book.css">
  <link rel="stylesheet" href="CSS/search.css">
  <link rel="stylesheet" href="CSS/sidebar.css">
  <script src ="JS/cart.js" async></script>
  <script src="JS/addToCart.js" async></script>
</head>
<body>

  <!-- Header and Navigation -->
  <header>
    <div class="nav-container">
      <h1><a href="index.html" style="color: inherit; text-decoration: none;">SMU Library</a></h1>
      <nav>
        <ul>
          <!-- Menu Item 1 -->
          <li class="dropdown">
            <a href="#">Books</a>
            <ul class="dropdown-content">
              <li><a href="borrowbook.html">Borrow a Book</a></li>
              <!-- <li><a href="#">Return a Book</a></li> -->
              <li><a href="sellbook.html">Sell a Book</a></li>
              <!-- <li><a href="#">Buy a Book</a></li> -->
            </ul>
          </li>

          <!-- Menu Item 2 -->
          <li class="dropdown">
            <a href="#">Service</a>
            <ul class="dropdown-content">
              <li><a href="bookappointment.html">Book an Appointment</a></li>
              <li><a href="reserveroom.html">Reserve Room</a></li>
              <li><a href="requestlibrarian.html">Request A Librarian </a></li>
            </ul>
          </li>

          <!-- Menu Item 3 -->
          <li class="dropdown">
            <a href="#">News and Events</a>
            <ul class="dropdown-content">
              <li><a href="PHP/eventcalendar.php">Latest News</a></li>
              <li><a href="promotions.html">Promotions</a></li>
              <li><a href="support.html">Support the Library</a></li>
            </ul>
          </li>

          <!-- Menu Item 4 -->
          <!-- <li class="dropdown">
            <a href="#">For You</a>
            <ul class="dropdown-content">
              <li><a href="#">Student</a></li>
              <li><a href="#">Military</a></li>
              <li><a href="#">Public</a></li>
            </ul>
          </li> -->

          <!-- Menu Item 5 -->
          <li class="dropdown">
            <a href="#">About Us</a>
            <ul class="dropdown-content">
              <li><a href="team.html">Our Staff</a></li>
              <li><a href="contact.html">Contact Us</a></li>
              <li><a href="location.html">Location</a></li>
              <!--<li><a href="#">Sub Item 3</a></li> -->
            </ul>
          </li>
             <!-- Menu Item 6 -->
             <li class="dropdown">
              <a href="">My Account</a>
              <ul class="dropdown-content">
                <li><a href="sign_in.html">Sign in</a></li>
                <li><a href="PHP/profile.php">My Profile</a></li>
                <li><a href="maincart.html">
                  My Cart
                  <span id="cart-count-badge" style="background:red;color:white;padding:2px 6px;border-radius:12px;font-size:12px;margin-left:4px;">0</span>
                </a></li>
              </ul>
            </li>
        </ul>
      </nav>
    </div>
   
  </header>
  
    <!-- Main Content Areas -->
    
     <!-- Use this section to update code for borrowing books-->
<!-- SEARCH BAR SECTION (uses styles from search.css) -->

<div class=" main-block">

  <div class = "search-bar">
    <h2>Search the Library Catalog</h2>

    <form action="PHP/borrowbook.php" method="GET" class="search-form">
      
      <!-- Search type dropdown (Keyword, Title, Author, etc.) -->
      <label for="search-type" class="sr-only">Search Type</label>
      <select id="search-type" name="search-type">
        <option value="keyword">Keyword</option>
        <option value="title">Title</option>
        <option value="author">Author</option>
        <option value="author">Genre</option>
      </select>

      <!-- Main text input -->
      <label for="search-input" class="sr-only">Search</label>
      <input 
        type="text" 
        id="search-input" 
        name="q" 
        placeholder="Find books, ebooks and more"
      >

      <!-- Removed the Collection dropdown and the checkbox container. -->

      <!-- Submit button -->
      <button type="submit" class="search-button">Search</button>
    </form>
  </div>

<div  class ="side-bar">



<!-- SIDEBAR -->
<aside class="sidebar">
  <nav>
    <h3>Browse Categories</h3>
    <ul>
      <li><a href="#">Biography &amp; Memoir</a></li>
      <li><a href="#">Business</a></li>
      <li><a href="#">Cooking</a></li>
      <li><a href="#">Fantasy, Horror &amp; Sci-Fi</a></li>
      <li><a href="#">Historical Fiction</a></li>
      <li><a href="#">Literary Fiction</a></li>
      <li><a href="#">Mystery &amp; Thriller</a></li>
      <!-- etc. -->
    </ul>
  </nav>
</aside>
</div>
  <div class ="book-content"> 
      <!-- Table container (optional) -->
  <div class="table-container">
    <table class="book-table">
      <!-- Row heading: New Additions -->
      <tr>
        <!-- Span across all 5 columns -->
        <td colspan="5" class="row-heading">New Additions</td>
      </tr>
      <tr>
        <!-- 5 columns of books in the first row -->
        <td>
          <h3 class="book-title">The Partner</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/ThePartner.png" alt="Book 1" class="book-image" />
          <div class="book-details">
            <p class="price">$9.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
        <td>
          <h3 class="book-title">The Professor</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/professor.jpg" alt="Book 2" class="book-image" />
          <div class="book-details">
            <p class="price">$12.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
        <td>
          <h3 class="book-title">The Wise Man's Fear</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/wise.jpg" alt="Book 3" class="book-image" />
          <div class="book-details">
            <p class="price">$14.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
        <td>
          <h3 class="book-title"> The Name of the Wind</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/wind.jpg" alt="Book 4" class="book-image" />
          <div class="book-details">
            <p class="price">$8.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
        <td>
          <h3 class="book-title"> To Read</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/read.png" alt="Book 5" class="book-image" />
          <div class="book-details">
            <p class="price">$19.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
      </tr>

      <!-- Row heading: Most Borrowed -->
      <tr>
        <td colspan="5" class="row-heading">Most Borrowed</td>
      </tr>
      <tr>
        <!-- 5 columns of books in the second row -->
        <td>
          <h3 class="book-title"> When we Flew away</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/flew.png" alt="Book 6" class="book-image" />
          <div class="book-details">
            <p class="price">$10.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
        <!-- Repeat similar structure for columns 2-5 in this row -->
        <td>
          <h3 class="book-title"> Truth and Lies</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/TruthAndLies.jpg" alt="Book 6" class="book-image" />
          <div class="book-details">
            <p class="price">$10.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
        <td>
          <h3 class="book-title"> Ripped from the Healines</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/ripped.jpg" alt="Book 6" class="book-image" />
          <div class="book-details">
            <p class="price">$10.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
        <td>
          <h3 class="book-title"> Beneath a Scarlet Sky</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/sky.jpg" alt="Book 6" class="book-image" />
          <div class="book-details">
            <p class="price">$10.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
        <td>
          <h3 class="book-title"> The Friend</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/friend.jpg" alt="Book 6" class="book-image" />
          <div class="book-details">
            <p class="price">$10.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
      </tr>

      <!-- Row heading: Most Liked -->
      <tr>
        <td colspan="5" class="row-heading">Most Liked</td>
      </tr>
      <tr>
        <!-- 5 columns of books in the third row -->
        <td>
          <h3 class="book-title"> Unstoppable Confidence</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/confidence.jpg" alt="Book 6" class="book-image" />
          <div class="book-details">
            <p class="price">$10.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
        <!-- Repeat similar structure for columns 2-5 in this row -->
        <td>
          <h3 class="book-title"> Java Programming</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/java.jpg" alt="Book 6" class="book-image" />
          <div class="book-details">
            <p class="price">$10.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
        <td>
          <h3 class="book-title"> Python for Kids</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/python.jpg" alt="Book 6" class="book-image" />
          <div class="book-details">
            <p class="price">$10.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
        <td>
          <h3 class="book-title"> React Native</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/react.png" alt="Book 6" class="book-image" />
          <div class="book-details">
            <p class="price">$10.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
        <td>
          <h3 class="book-title"> The C Programming Language</h3>
          <h2 class="book-author">John Grisham</h2>
          <img src="Imgs/BookCovers/c.jpg" alt="Book 6" class="book-image" />
          <div class="book-details">
            <p class="price">$10.99</p>
            <!-- <p class="rating">★★★★☆</p>-->
            <button class="book-action-button-buy">Buy Book</button>
            <button class="book-action-button">Borrow</button>
          </div>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 SMU Library</p>
  </footer>

  <div id="toast" style="
    visibility: hidden;
    min-width: 250px;
    margin-left: -125px;
    background-color: #4CAF50;
    color: white;
    text-align: center;
    border-radius: 5px;
    padding: 16px;
    position: fixed;
    z-index: 1000;
    left: 50%;
    bottom: 30px;
    font-size: 17px;">
</div>
<script>
  document.addEventListener('DOMContentLoaded', function() {
      const buyButtons = document.querySelectorAll('.book-action-button-buy');
  
      buyButtons.forEach(function(button) {
          button.addEventListener('click', function() {
              const bookContainer = this.closest('td');
  
              const title = bookContainer.querySelector('.book-title').innerText;
              const author = bookContainer.querySelector('.book-author').innerText;
              const priceText = bookContainer.querySelector('.price').innerText;
              const price = parseFloat(priceText.replace('$', ''));
              const imgSrc = bookContainer.querySelector('.book-image').src;
  
              let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
  
              // Check if this book already exists
              const alreadyExists = cartItems.some(item => item.title === title && item.author === author);
  
              if (alreadyExists) {
                  showToast('Book is already in your cart!');
                  return;
              }
  
              // Otherwise add book
              cartItems.push({
                  title: title,
                  author: author,
                  price: price,
                  imgSrc: imgSrc,
                  quantity: 1
              });
  
              localStorage.setItem('cartItems', JSON.stringify(cartItems));
  
              showToast('Book added to cart!');
              // ✅ No redirect anymore!
          });
      });
  
      // Toast popup function
      function showToast(message) {
          const toast = document.getElementById('toast');
          toast.innerText = message;
          toast.style.visibility = 'visible';
          toast.style.opacity = '1';
  
          setTimeout(function() {
              toast.style.opacity = '0';
          }, 2000);
  
          setTimeout(function() {
              toast.style.visibility = 'hidden';
          }, 2500);
      }
  });
  </script>
  <script>
    function updateCartBadge() {
        const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
        const badge = document.getElementById('cart-count-badge');
        if (badge) {
            badge.innerText = cartItems.length;
        }
    }
    
    // Call this immediately when the page loads
    document.addEventListener('DOMContentLoaded', function() {
        updateCartBadge();
    });
    </script>
    
  <script> 
    document.addEventListener('DOMContentLoaded', function() {
    const borrowButtons = document.querySelectorAll('.book-action-button');

    borrowButtons.forEach(button => {
        button.addEventListener('click', function() {
            const bookContainer = this.closest('td');
            const title = bookContainer.querySelector('.book-title').innerText;
            const author = bookContainer.querySelector('.book-author').innerText;

            let borrowedBooks = JSON.parse(localStorage.getItem('borrowedBooks')) || [];

            // Check if the book already borrowed
            const alreadyBorrowed = borrowedBooks.some(book => book.title === title && book.author === author);

            if (alreadyBorrowed) {
                showToast('You have already borrowed this book!');
                return;
            }

            borrowedBooks.push({ title, author, borrowedOn: new Date().toLocaleDateString() });
            localStorage.setItem('borrowedBooks', JSON.stringify(borrowedBooks));

            showToast(`Borrowed "${title}" successfully!`);
        });
    });

    function showToast(message) {
        const toast = document.getElementById('toast');
        toast.innerText = message;
        toast.style.visibility = 'visible';
        toast.style.opacity = '1';

        setTimeout(() => { toast.style.opacity = '0'; }, 2000);
        setTimeout(() => { toast.style.visibility = 'hidden'; }, 2500);
    }
});

  </script>
  
  
</body>
</html>